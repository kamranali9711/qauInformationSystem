<!DOCTYPE html>
<html>
<head>

<link href="/css/dining.css" rel="stylesheet">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


	
<style>


</style>
</head>
<body onload="myFunction()">
<div>
		 <div  >
        <img src="/images/qau1.png" height="100px" width="700px" style="margin-left: 300px">
        
    </div>
	
			
	<div onload="myFunction()">
			<div class="nav">
				<ul><li class="Dashbord"><a  href="/page/dashbord">Dashbord</a></li>
				<li class="Schorarship"><a  href="/page/scholarships">Schorarship</a></li>
				<li  class="Transport"><a href="/page/transports">Transports</a></li>
				<li class="Dining"><a class="active" href="/page/dining">Dining</a></li>
				<li class="Program"><a href="/page/notification">Notification</a></li>
				<li class="Events"><a href="/page/events">Events</a></li>
				<li class="News"><a href="/page/news">News</a></li>
				<li class="News"><a href="/page/Admission">Admission</a></li>
				<li class="Logout" style="float:right"><a href="/">Logout</a></li>
				<div class="dropdown">
					<button class="dropbtn">Data View 
					<i class="fa fa-caret-down"></i>
					</button>
					<div class="dropdown-content">
					<a href="/page/viewscholarships">Schorarship Data</a>
					<a href="/page/viewstransport">Transport Data</a>
					<a href="/page/viewsdining">Dining Data</a>
					<a href="/page/viewsevent">Events Data</a>
					<a href="/page/viewnews">News Data</a>
	  <a href="/page/viewadmission">Admission Data</a>
	  <a href="/page/viewnotification">Notification Data</a>
					</div>
				</div> 
			  </ul>
			
			</div>
			<div class="form">
				<h2 style="margin-left:450px">Hurts detail Form </h2>
				
				<form  method="post" id="form" name="myForm" type="submit" action="/api/dining/add" onsubmit="alert('Succesfully add data');" >
					<label for="hurt" style="margin-left:450px;margin-top:50px; padding-top:50px">Hurt Name</label><br>
					
					<textarea class="dataedit" name="name" type="text" id="name" rows="2" cols="25" required placeholder="Enter Hurt Name...." style="margin-left:450px;margin-top:10px"></textarea><br>
					
					<!-- Band Description
					<input type="text" id="fname" name="firstname" placeholder="Your name.."> -->
					
				<!--	<label for="busno" style="margin-left:100px">Bus No</label>-->
				<label for="dish" style="margin-left:450px">Dish Name</label><br>
					<textarea class="dataedit" name="menu" type="text" id="menu" rows="15" cols="25" required placeholder="Like = Dish name : Dish price...." style="margin-left:450px;margin-top:10px"></textarea><br>

					<button type="submit" onclick="message()"  class="button button1" value="Add Row" style="margin-top:30px">Submit</button>
					
          
		  
		   
				</form>
			
			</div>
				<h1 style="margin-left:40%">Data of Hurts</h1>
				 <table border="1" id="data" style="margin-left:10px; width: 100%; margin-right:10px">
					<thead>
						<tr>
							
							<th style="width:30%">Hurt Name</th>
								<th style="width:60%">Dish Name</th>
								<th style="width:5%">Update</th>
								<th style="width:5%">Delete</th>
						</tr>
					</thead>
					
				</table>
			
			
			
			<div class="footer">
			
			</div>
			
		



	</div>
	
</div>



<!-- For Background image -->
<script>
function myFunction() {
    document.body.style.backgroundColor = "#f3f3f3";
    document.body.style.backgroundImage = "url('https://www.digitalplatforms.co.za/wp-content/uploads/2015/11/Website-Design-Background.png')";
}
</script>

>

<!-- For Background image -->


        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>



        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		
			<script>
      
populateTable();
function populateTable(){
        var mydata;
        var userdata;
      $(document).ready(function(){
        console.log('Unable to put data');

       
                $.getJSON("http://localhost:3000/api/dining", function(data){
                    console.log(data);
      
                
               
  
                    $.each(data, function(i, field){
                   
                       $('#data').append('<tr><td>'+field.name+'</td><td>'+field.menu+
                        '</td><td><a href="#"  class="deleteEmployee"   rel="' + this._id + '" >delete</a></td><td> <a href=""  class="btn btn-warning" onclick="Change()><span class="glyphicon glyphicon-edit"></span>Update</a></td></tr>' 
            
                    );

                        });                      
     
                })
               
            });
          }

// function of delete


$('#data tbody').on('click', 'td a.deleteEmployee', function deleteEmployee(event){


    event.preventDefault();
    // Pop up a confirmation dialog
    var confirmation = confirm('Are you sure you want to delete this user?');
    // Check and make sure the user confirmed
    if (confirmation === true) {
        // If they did, do our delete
        $.ajax({
            method:'DELETE',
            type: 'DELETE',
            url: '/api/dining/delete/'  + $(this).attr('rel'),

        }).done(function( response) {
          
           
          
                      // Check for a successful (blank) response
          
                      if (response.msg == '') {
                       
          
                      }
          
                      else {
                     
                          alert('sucessfully deleted!');
                        
          
                      }

});
}else {

// If they said no to the confirm, do nothing

        return false;

    }
})



			</script>
			


</body>
</html>
